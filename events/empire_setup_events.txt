namespace = starsector_setup
### Setup event to give Hegemony all their systems ad colonies, only fired by Hegemony origin
### Event_targets for the systems are (global): starsector_heg_homesystem; starsector_heg_naraka; starsector_heg_samarra; starsector_heg_tia
country_event = {
	id = starsector_setup.1
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		log = "STARSECTOR_LOG: starting event starsector_setup.1"
		# Dummy country needed to create dummy leaders to be used in renaming
		create_country = {
			name = "starsector dummy country"
			type = neutral_faction
			effect = {
				save_global_event_target_as = dummy_country_target
			}
		}
		# Thankfully, there are only 4 systems I need to run this event code in
		# Start in the Hegemony capital system
		owner.capital_scope.solar_system = {
			log = "STARSECTOR_LOG: calling a scritped effect 'starsector_create_colony_effect'"
			every_system_planet = {
				limit = {
					has_planet_flag = starsector_heg_colony
				}
				save_global_event_target_as = planet_target
				log = "STARSECTOR_LOG: starsector_setup.1 found a planet to colonize named [This.GetName] in SYSTEM:[Prev.GetName]"
				starsector_create_colony_effect = yes
				clear_global_event_target = planet_target
			}
			# The systems are supposed to be neighbors, scoping from here should be fine
			every_neighbor_system = {
				limit = {
					has_star_flag = starsector_is_heg_system_flag
				}
				starsector_create_outpost_effect = yes
				every_system_planet = {
					limit = {
						has_planet_flag = starsector_heg_colony
					}
					save_global_event_target_as = planet_target
					log = "STARSECTOR_LOG: starsector_setup.1 found a planet to colonize named [This.GetName] in SYSTEM:[Prev.GetName]"
					starsector_create_colony_effect = yes
					clear_global_event_target = planet_target
				}
			}
		}
		clear_global_event_target = dummy_country_target
		log = "STARSECTOR_LOG: starsector_setup.1 has finished"
	}
}
